<?php
/*
	Dit scriptje gebruikt je PathFinder class en je resultaat
	en zet het om in een tekeningske zodat je je route kan nakijken
*/


$input = <<<EOD
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011111101111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111100000001111000011110000000111101110000001111111111111111111111111111111111111111111111110
011111101111111111011101110111111111111110111111111111111111111111111111111111111111111111111110
011111101111111111011101110111111111101110111111111111111111111111111111111111111111111111111110
011111101111111111011101110001111111101110001111111111111111111111111111111111111111111111111110
011111101111000111011101110111111111101110111111111111111111111111111111111111111111111111111110
011111101111110111011101110111111111101110111111111111111111111111111111111111111111111111111110
011111100000000111100001110000000111101110000001111111111111111111111111111111111111111111111110
011111111111111111111111111111111111101111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111101111111111111111111111111111111111111111111111111111111110
011111111111000111110011101110000111100011111110111111000011111111111111111111111111111111111110
011111111111011011101011111110111011101101111100011110011111111111111111111111111111111111111110
011111111111011100011011101110111011101101111001001110111111111111111111111111111111111111111110
011111111111011111111011101110111011101101111011101110111111111111111111111111111111111111111110
011111111111011111111011101110111011101101111000001110111011111111111111111111111111111111111110
011111111111011111111011101110110011101101111011101110011011111111111111111112111111111111111110
011111111111011111111011101110001111100001111011101111000011111111111111111123211111111111111110
011111111111111111111111111111111111101111111111111111111111111111111111111234321111111111111110
000000000000000000000000000000000000000000000000000000000000000000000000000005432111111111111110
011111111111111101111111111111111111111111111111111111111111111111111111111234321111111111111110
011111111101111101111111111111111111111111111111111111011111111111111111111123211111111111111110
011111111101111101111111111111111111111111111111111111011111111111111111111112111111111111111110
011111111101111111111111111111111111111111111111111111011111111111111111111111111111111111111110
011111100000000000000000000000000000000111111111000000000000000000000000000000000000000000000000
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110
011111111111111222222222222222222222222222222222222222222222222222222221111111111111111111111110
011111111222222222222222222222222222222222222222222222222222222222222222222221111111111111111110
011111111122222222333333333333333333333333333333333333333333333333333333333222211111111111111110
011111112222222333333333333333333333444444444443333333333333333333333333333332222211111111111110
011111122223333333333333333333333334444000400044444333333333333333333333333333222221111111111110
011111222333333333333333333333334444440444044404444444443333333333333333333333222221111111111110
011122233333333333333333333444444444444044444044444444444444333333333333333333332222222111111110
011122223333333333333333334444444444444404440444444444444444333333333333333333222222211111111110
011112222223333333333333333344444444444440404444444444444433333333333333333333322221111111111110
011111222223333333333333333333344444444444044444444444443333333333333333333322222221111111111110
011111111122222233333333333333333333333333333333333333333333333333333333333222222111111111111110
011111111112222222222222222222222222222222222222222222222222222222222222222222211111111111111110
011111111111111111111111111111111111111111111111111111111111111111111111112222211111111111111110
011000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111110
000011111111111111111111111111111111111111111111111111111111111111111111000000000000000011111110
011111111111111111111111111111111111111111111111111111111111111111111111111011111111111011111110
011110000000000000000000000000000000000000000000000000000000000000011111111011111011111011111110
011110111111111111112224444222222222222222222222211111111111111111011111111111111011111111111110
011110111111111111122222222533333333333333322222222111111111111111000000000000000000000000000000
011110111111111122222333333333444444444433333333322211111111111111011111111111111111111111111110
011110111111112222333333344444445555554444444333333222111111111111011111111111111111111111111110
011110111111223333333344444444455555555544444443333332221111111111011111111111111111111111111110
011110111112233333444444444445555555555555444444433333322211111111011111111111111111111111111110
011111111122333344444444445555555555555555555544444433332222111111111111111111111111111111111110
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
EOD;


error_reporting (E_ALL);

// Config
$startlocation = new Neuron_GameServer_Map_Location (2, 2);
$endlocation = new Neuron_GameServer_Map_Location (92, 58);

$map = array ();
$map[0] = array ();

$row = 0;
$col = 0;

foreach (str_split ($input) as $v)
{
	if ($v == PHP_EOL)
	{
		$col = 0;
		$row ++;
		$map[$row] = array ();
	}
	else
	{
		$map[$row][] = $v;
		$col ++;
	}
}

$rows = count ($map);
$cols = count ($map[0]);

// Set the map
$pathfinder = new Neuron_GameServer_Map_Pathfinder ();
$pathfinder->setMap ($map);

// Get the path
$path = $pathfinder->getPath ($startlocation, $endlocation);

// Display the map (just to make it easier)
$squarewidth = 10;

$sizex = $cols * $squarewidth;
$sizey = $rows * $squarewidth;

$img = imagecreatetruecolor ($sizex, $sizey);

$white = imagecolorallocate ($img, 255, 255, 255);
imagefilledrectangle($img, 0, 0, $sizex, $sizey, $white);

$colors = array ();
$colors[0] = imagecolorallocate ($img, 0, 0, 0);
$colors[1] = imagecolorallocate ($img, 220, 220, 250);
$colors[2] = imagecolorallocate ($img, 200, 200, 230);
$colors[3] = imagecolorallocate ($img, 180, 180, 210);
$colors[4] = imagecolorallocate ($img, 150, 150, 190);
$colors[5] = imagecolorallocate ($img, 120, 120, 170);

$start = imagecolorallocate ($img, 255, 0, 0);
$pathcolor = imagecolorallocatealpha ($img, 0, 255, 0, 80);

// Draw complete map
foreach ($map as $row => $cols)
{
	foreach ($cols as $col => $cell)
	{
		$x = $col * $squarewidth;
		$y = $row * $squarewidth;
	
		imagefilledrectangle ($img, $x, $y, $x + $squarewidth - 2, $y + $squarewidth - 2, $colors[$cell]);
	}
}

// Path
if ($path)
{
	foreach ($path->getPath () as $v)
	{
		$x = $v[0] * $squarewidth;
		$y = $v[1] * $squarewidth;

		imagefilledrectangle ($img, $x, $y, $x + $squarewidth - 2, $y + $squarewidth - 2, $pathcolor);	
	}
}

// Draw start and stop
$x = $startlocation[0] * $squarewidth;
$y = $startlocation[1] * $squarewidth;
imagefilledrectangle ($img, $x, $y, $x + $squarewidth - 2, $y + $squarewidth - 2, $start);

$x = $endlocation[0] * $squarewidth;
$y = $endlocation[1] * $squarewidth;
imagefilledrectangle ($img, $x, $y, $x + $squarewidth - 2, $y + $squarewidth - 2, $start);

header('Content-Type: image/png');

imagepng ($img);
imagedestroy ($img);